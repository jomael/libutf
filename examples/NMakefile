CC = cl.exe
CFLAGS = /Wall /WX /I..

LIBUTF_HEADERS = ../converter.h ../decoder.h ../encoder.h
LIBUTF_HEADERS = $(LIBUTF_HEADERS) ../utf8.h ../utf16.h ../utf32.h
LIBUTF_HEADERS = $(LIBUTF_HEADERS) ../error.h ../version.h

all: sigma.exe iconv.exe

sigma.exe: sigma.c $(LIBUTF_HEADERS)
	$(CC) $(CFLAGS) sigma.c /link /libpath:.. utf.lib

iconv.exe: iconv.c $(LIBUTF_HEADERS)
	$(CC) $(CFLAGS) iconv.c /link /libpath:.. utf.lib

clean:
	del sigma.obj sigma.exe
	del iconv.obj iconv.exe

